---
layout: post
title:  "고방검색기(formulaFinder) 업데이트"
categories: code
---

### 업데이트 알림

벌써 몇년 전에 웹상에 상한론과 금궤요략 등 고방을 구성 본초로 검색할 수 있는 [고방검색기](https://pinedance.github.io/zayo-gofang/formulafinder.html)를 만든 바 있다. 물론 사용자는 거의 없는 것 같고 나만 간간히 쓰는 정도지만.... 장점이라면

* 요시마스도도(길익동동) 계열의 유취방 및 방극, 약징 등의 내용이 나타나도록 설계되었다
* PC와 모바일 어디서나 인터넷만 연결되면 간단히 사용할 수 있다.

오늘 업데이트하여 다시 올렸다. 업데이트 내용은 다음과 같다. 

* 기존에는 firebase에서 데이터를 당겨와 서비스하다가 그냥 json 파일로 데이터를 당겨와 서비스도록 바꿨다. 

사용시 불편한 점인데, 지금 내 수준에서는 어쩔 수 없어 놓아 둔 부분이다.

* 약간 무겁다. angularjs 기반이라 그렇다. 할 수 없다. 
* 자동완성 같은 기능들은 라이브러리를 가져다 써서 만들었는데, 라이브러리가 알파벳에 최적화 되어 있어 한글의 경우 한 글자를 쓰고 다른 액션을 줘야 잘 작동된다. 

* ios, chrome에서는 잘 돌아가는 것을 확인 했다. 하지만 explorer 등에서는 어떤지 모르겠다. 

검색 결과가 잘 나타나지 않는 경우는 처방구성 등 초기 데이터 오류이다. 서비스에 사용되고 있는 초기 데이터는 [github repo](https://github.com/pinedance/spa/tree/gh-pages/formulafinder/src/data)에서 확인해 볼 수 있다. 사용 중에 오류가 발견된다면 [여기](https://github.com/pinedance/spa/issues)에서 오류신고를 할 수 있다. 
참고로 이용은 자유지만 오류에 대해 책임지지 않는다. 용량이나 처방 잘못 써서 생기는 책임은 모두 사용자에게 있다. 

![페이지](https://pinedance.github.io/public/screenshot/formulafinder-html.png)
[고방처방 검색기 바로가기](https://pinedance.github.io/zayo-gofang/formulafinder.html)

*** 

(160506) upate

### 사용법

어떻게 사용하느냐에 대해 문의가 좀 있었다. 

기본적으로는 본초 구성으로 처방을 찾을 수 있다. "포함하는 본초"에서 본초를 선택하면 그 본초가 포함된 처방리스트가 나열된다. 본초는 여러개 연속해서 `tag` 형태로 입력할 수 있다. 다음으로 "제외하는 본초"에서 선택한 본초는 그 본초를 제외한 리스트가 나온다. 본초 이름 옆에 숫자가 붙어 있는 것은 용량이다. `계지`는 계지 전체를 의미하고 `계지3`은 계지가 3냥 포함된 처방을 찾는데 쓴다. 

예를 들어 "포함하는 본초"에 `계지`, `감초`를 넣고, "제외하는 본초"에 `작약`을 넣으면 `계지`와 `감초`가 포함되어 있지만 `작약`은 포함되어 있지 않는 처방 리스트가 표시된다. 

"찾는 증상"에 `두통` 같은 증상을 넣으면 `약징(藥徵)`을 기준으로 그 병증과 관련된 본초들이 나타난다. 마음에 맞는 본초를 선택하면 "포함하는 본초"에 자동으로 등록된다. 

이해가 안간다면 아래 동영상을 참고하시라.

<iframe width="420" height="315" src="https://www.youtube.com/embed/h5OISRMLluY" frameborder="0" allowfullscreen></iframe>